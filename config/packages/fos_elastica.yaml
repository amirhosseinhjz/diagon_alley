# Read the documentation: https://github.com/FriendsOfSymfony/FOSElasticaBundle/blob/master/doc/setup.md
fos_elastica:
  clients:
    default: { url: '%env(ELASTICSEARCH_URL)%' }
  indexes:
    product:
      properties:
        name:
          property_path: name
        description:
          property_path: description
        viewCount:
          property_path: viewCount
      persistence:
        driver: orm
        model: App\Entity\Product\Product
        provider: ~
        finder: ~
        listener:
          defer: true
        elastica_to_model_transformer:
          ignore_missing: true
#      settings:
#        index:
#          analysis:
#            analyzer:
#              my_analyzer:
#                type: custom
#                tokenizer: lowercase
#                filter: [ my_ngram ]
#            filter:
#              my_ngram:
#                type: "nGram"
#                min_gram: 3
#                max_gram: 5

    category:
      properties:
        name:
          property_path: name
        description:
          property_path: description
      persistence:
        driver: orm
        model: App\Entity\Category\Category
        provider: ~
        finder: ~
        listener:
          defer: true
        elastica_to_model_transformer:
          ignore_missing: true

    brand:
      properties:
        name:
          property_path: name
      persistence:
        driver: orm
        model: App\Entity\Brand\Brand
        provider: ~
        finder: ~
        listener:
          defer: true
        elastica_to_model_transformer:
          ignore_missing: true

    seller:
      properties:
        shopSlug:
          property_path: shopSlug
      persistence:
        driver: orm
        model: App\Entity\User\Seller
        provider: ~
        finder: ~
        listener:
          defer: true
        elastica_to_model_transformer:
          ignore_missing: true

    variant:
      properties:
        description:
          property_path: description
        price:
          property_path: price
      persistence:
        driver: orm
        model: App\Entity\Variant\Variant
        provider: ~
        finder: ~
        listener:
          defer: true
        elastica_to_model_transformer:
          ignore_missing: true
